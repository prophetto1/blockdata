## Q&A
1. The immutable metadata that can be acquired when a user uploads a document - depends on what is generated by the upload doc conversion protocol - docling or pandoc - what are the metadata that is acquirable for an uploaded document- the immutable- as is doc specifications captured by docling or pandoc?

### Findings

#### Docling
Currently, Docling primarily captures **file-level and conversion metadata**.
- **File Metadata**:
    - `filesize` (bytes)
    - `page_count` (detected pages)
    - `document_hash` (stable hash of input file)
    - `format` (e.g., PDF, DOCX, HTML)
    - `file` (path)
- **Conversion Metadata** (in `ConversionAssets`):
    - `timestamp` (when processed)
    - `status` (success/failure)
    - `timings` (processing profile)
    - `confidence` (OCR/layout scores)
    - `version` (docling package versions)

*Note: Semantic metadata extraction (title, authors, references, language) is listed as "Coming soon" in the Docling roadmap.*

#### Pandoc
Pandoc captures and allows manipulation of **semantic document metadata**.
- **Standard Fields** (commonly preserved from inputs like Docx/EPUB):
    - `title`
    - `author`
    - `date`
- **Flexible Metadata**:
    - Pandoc supports arbitrary metadata fields via YAML metadata blocks or the `-M` / `--metadata` command-line option.
    - When converting from formats that support metadata (like Docx, EPUB, LaTeX), Pandoc attempts to map these into its internal metadata structure.

2. is the above captured metadata the same regardless of input format?

No.

#### Docling
- **File Metadata** (size, hash, page count) is captured consistently across all formats.
- **Semantic Metadata** (title, author, etc.) is **not** consistently captured on the document object, as this feature is still in development.
    - *Exception:* For HTML, the `<title>` tag is extracted as a text element (classified as "furniture"), but `<meta>` tags are currently ignored.

#### Pandoc
- Metadata capture **depends heavily on the input format**:
    - **Markown**: Parsed from YAML metadata blocks.
    - **Docx/EPUB/ODT**: Parsed from internal file properties (e.g., `core.xml`).
    - **LaTeX**: Parsed from `\title`, `\author`, etc.
    - **HTML**: Parsed from `<title>` and `<meta>` tags.
- If the input format does not support metadata (e.g., plain `.txt`), or if Pandoc's reader for that format doesn't implement it, the metadata fields will be empty.

3. what exactly is document_hash - hashing? location? size?

`document_hash` is a **SHA-256 hash of the entire file content**.
- It is calculated by reading the file stream in chunks.
- It is **independent** of filename, location, or modification timestamp.
- It relies solely on the binary content of the file (changing even one byte of content will change the hash).

4. What document types are supported by Docling?

Based on `docling.datamodel.base_models.InputFormat`, the supported formats are:
- **Documents:** PDF (`.pdf`), DOCX (`.docx`, `.dotx`, `.docm`, `.dotm`), PPTX (`.pptx`, `.potx`, `.ppsx`, `.pptm`), XLSX (`.xlsx`, `.xlsm`)
- **Web/Text:** HTML (`.html`, `.xhtml`), Markdown (`.md`), AsciiDoc (`.adoc`), CSV (`.csv`)
- **Images:** `.jpg`, `.jpeg`, `.png`, `.tif`, `.tiff`, `.bmp`, `.webp`
- **XML Standards:** USPTO XML, JATS XML, METS GBS
- **Audio/Video:** `.wav`, `.mp3`, `.mp4`, `.m4a`, `.aac`, `.ogg`, `.flac`, `.avi`, `.mov` (via ASR)

5. What metadata is automatically captured by Docling?

If you use Docling for the initial conversion, you acquire the following "immutable" metadata fields automatically:

**A. Input Document Info (InputDocument)**
- `file` (Required): Original filename/path.
- `format` (Required): Detected format enum (e.g., `InputFormat.PDF`).
- `document_hash` (Computed): SHA-256 of the binary stream.
- `filesize` (Optional, Computed): Size in bytes.
- `page_count` (Default 0): Number of pages (populated for paginated formats).

**B. Conversion Assets (The Output Object)**
The `ConversionAssets` object contains all the derived metadata and content.

1.  **Process Metadata** (Top-level fields)
    - `status` (Default: Pending): `success`, `failure`, `partial_success`, `skipped`.
    - `timestamp` (Optional): ISO timestamp of when assets were saved.
    - `version` (Default: Current): Versions of Docling components used.
    - `timings` (Optional): Granular profiling data.
    - `errors` (Default: Empty): List of error items.

2.  **Structure Metadata** (From `pages` list)
    - `size`: Physical page dimensions (width/height).
    - `layout_predictions`: Counts/locations of detected elements.
    - `reading_order`: Computed sequence of content blocks.

3.  **Document Metadata** (From `document` object)
    - `origin.mimetype`: Detected MIME type.
    - `origin.binary_hash`: Same as `input.document_hash`.
    - `origin.filename`: Name of the source file.
    - `origin.cloud_storage_url`: (Optional) Source URL.

*Note: As mentioned in Finding #1, deeply semantic metadata (Title, Author, Creation Date embedded in the file properties) is **not yet exposed** in the standard Docling output object, though it may exist in the raw file.*

