

1. Canonical artifact (immutable output)

  - Each ingest produces an immutable envelope
    plus an immutable block inventory derived
    from the canonical Markdown representation.

  2. Immutable identity (deterministic IDs)

  - source_uid = SHA256(docling.input.format +
    "\n" + docling.input.document_hash)
  - md_uid = SHA256(raw_markdown_string)
  - doc_uid =
    SHA256(system_config.chunking_strategy + "\n"
    + md_uid)
  - node_uid = SHA256(doc_uid + ":" + node_index)

  3. Block invariants

  - Blocks are immutable and include: node_type
    (from MDAST node.type), node_index (traversal
    order), section_path (heading stack),
    char_span (from MDAST node.position), and
    original_content.

  4. Chunking strategies (fixed vs flow)

  - The available chunking_strategy values depend
    on whether the input is Fixed Layout or Flow
    Layout:
      - Universal: leaf (atomic, 1:1 with MDAST
        nodes)
      - Fixed-layout primary: page (group
        strictly by source page)
      - Flow-layout primary: section (group by
        heading hierarchy)