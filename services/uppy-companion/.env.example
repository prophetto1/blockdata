# Uppy Companion — environment contract
# Copy to .env for local development. On Cloud Run, set via --set-env-vars or Secret Manager.

# --- Core ---
COMPANION_SECRET=
COMPANION_DOMAIN=
COMPANION_PROTOCOL=https
COMPANION_SELF_ENDPOINT=
COMPANION_PORT=3020
COMPANION_DATADIR=/tmp/companion-data

# --- Security ---
# Comma-separated allowed origins for CORS + OAuth postMessage.
COMPANION_CLIENT_ORIGINS=https://blockdata.vercel.app,http://localhost:5173
# Comma-separated allowlist of upload destination URLs (SSRF prevention).
COMPANION_UPLOAD_URLS=https://dbdzzhshmigewyprahej.supabase.co/functions/v1/ingest
# Static headers Companion sends to the upload destination (JSON string).
# The apikey is the Supabase anon key — same for all users.
# Per-user Authorization headers flow through the Uppy client → Companion protocol.
COMPANION_UPLOAD_HEADERS={"apikey":"your-supabase-anon-key-here"}

# --- Google Drive ---
# Console: https://console.cloud.google.com/apis/credentials
# Redirect URI: https://<COMPANION_DOMAIN>/drive/redirect
COMPANION_GOOGLE_KEY=
COMPANION_GOOGLE_SECRET=

# --- Dropbox ---
# Console: https://www.dropbox.com/developers/apps
# Redirect URI: https://<COMPANION_DOMAIN>/dropbox/redirect
COMPANION_DROPBOX_KEY=
COMPANION_DROPBOX_SECRET=

# --- OneDrive ---
# Console: https://portal.azure.com → App registrations
# Redirect URI: https://<COMPANION_DOMAIN>/onedrive/redirect
# Set manifest signInAudience to "AzureADandPersonalMicrosoftAccount"
COMPANION_ONEDRIVE_KEY=
COMPANION_ONEDRIVE_SECRET=

# --- Box ---
# Console: https://app.box.com/developers/console
# Redirect URI: https://<COMPANION_DOMAIN>/box/redirect
COMPANION_BOX_KEY=
COMPANION_BOX_SECRET=
